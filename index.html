<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Daily Crossword</title>
<style>
body {
  font-family: Arial;
  text-align: center;
  background: #f5f5f5;
}

.grid {
  display: inline-grid;
  gap: 2px;
  margin: 20px;
}

.cell {
  width: 45px;
  height: 45px;
  font-size: 22px;
  text-align: center;
  text-transform: uppercase;
}

.black { background: #222; }
.correct { background: #b6f2b6; }
.wrong { background: #f8b6b6; }

button {
  padding: 10px 20px;
  font-size: 18px;
}
</style>
</head>
<body>

<h1>Grille du jour</h1>
<div id="grid"></div>

<h2>Définitions</h2>
<div id="clues"></div>

<button onclick="check()">Vérifier</button>

<script>
async function load() {
  const r = await fetch("data.json?"+Date.now());
  const data = await r.json();

  const g = document.getElementById("grid");
  g.innerHTML="";
  g.className="grid";
  g.style.gridTemplateColumns=`repeat(${data.grid[0].length},45px)`;

  data.grid.forEach((row,r)=>{
    row.forEach((cell,c)=>{
      if(cell==="#"){
        const d=document.createElement("div");
        d.className="cell black";
        g.appendChild(d);
      } else {
        const i=document.createElement("input");
        i.maxLength=1;
        i.className="cell";
        i.dataset.r=r;
        i.dataset.c=c;
        g.appendChild(i);
      }
    });
  });

  document.getElementById("clues").innerHTML =
    data.clues.map(c=>"<p>"+c+"</p>").join("");

  window.solution=data.grid;
}

function check(){
  document.querySelectorAll("input").forEach(i=>{
    const r=i.dataset.r;
    const c=i.dataset.c;
    if(i.value.toUpperCase()===window.solution[r][c]){
      i.classList.add("correct");
      i.classList.remove("wrong");
    } else {
      i.classList.add("wrong");
      i.classList.remove("correct");
    }
  });
}

load();
</script>

</body>
</html>
